<div class="book-details-container" *ngIf="book; else loading">
  <div class="book-details-card">
    <div class="book-cover">
      <img [src]="book.cover_image || 'assets/images/book-placeholder.jpg'" [alt]="book.title" />
    </div>

    <div class="book-info">
      <h2 class="title">{{ book.title }}</h2>
      <h4 class="author">by {{ book.author }}</h4>
      <p class="description">{{ book.description }}</p>

      <ul class="details-list">
        <li><strong>Category:</strong> {{ book.category }}</li>
        <li><strong>Published Year:</strong> {{ book.published_year }}</li>
        <li><strong>Pages:</strong> {{ book.pages }}</li>
        <li><strong>Publisher:</strong> {{ book.publisher }}</li>
        <li><strong>ISBN:</strong> {{ book.isbn }}</li>
        <li><strong>Language:</strong> {{ book.language }}</li>
        <li>
          <strong>Status:</strong>
          <span class="status" [class.available]="book.available" [class.unavailable]="!book.available">
            {{ book.available ? 'Available' : 'Reserved' }}
          </span>
        </li>
      </ul>

      <button class="reserve-btn"
        [disabled]="book.reservedByUser || reserving || !book.available"
        (click)="reserveBook(book)">
        {{ reserving ? 'Reserving...' :
           book.reservedByUser ? 'Reserved by you' :
           (book.available ? 'Reserve Book' : 'Not Available') }}
      </button>

      <p class="success-message" *ngIf="reservationSuccess">{{ reservationSuccess }}</p>
      <p class="error-message" *ngIf="reservationError">{{ reservationError }}</p>
    </div>
  </div>
</div>

<ng-template #loading>
  <div class="loading">Loading book details...</div>
</ng-template>
